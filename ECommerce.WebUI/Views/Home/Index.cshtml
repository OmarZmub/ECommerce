@using ECommerce.Data.Models
@model List<Product>
@{
    ViewData["Title"] = "Home Page";
    List<Product> products = Model;
}

<div class="features contanier">
    <div class="boxs">
        <div class="box">
            <div class="content">
                <h6>الشحن مجانا</h6>
                <p>التوصيل من يوم الي ثلاث ايام</p>
            </div>
            <img src="img/features1.png" alt="">
        </div>
        <div class="box">
            <div class="content">
                <h6>ضمان المال</h6>
                <p>ضمان استرداد الأموال لمدة 14 يومًا</p>
            </div>
            <img src="img/features2.png" alt="">
        </div>
        <div class="box">
            <div class="content">
                <h6>دعم عبر الإنترنت 24/7</h6>
                <p>الدعم الفني على أهبة الاستعداد</p>
            </div>
            <img src="img/features3.png" alt="">
        </div>
        <div class="box">
            <div class="content">
                <h6>دفع امن</h6>
                <p>يتم قبول جميع طرق الدفع</p>
            </div>
            <img src="img/features4.png" alt="">
        </div>
        <div class="box">
            <div class="content">
                <h6>عروض يوميا</h6>
                <p>خصومات تصل الي 50%</p>
            </div>
            <img src="img/features5.png" alt="">
        </div>
    </div>
</div>

<div class="banner contanier">
    <div class="boxs">
        <div class="box">
            <a href="/Product/Details/1">
                <img src="img/banner-1.jpg" alt="">
                <span class="glass-hover"></span>
            </a>
        </div>
        <div class="box">
            <a href="/Product/Details/2">
                <img src="img/banner-2.jpg" alt="">
                <span class="glass-hover"></span>
            </a>
        </div>
        <div class="box">
            <a href="/Product/Details/3">
                <img src="img/banner-3.jpg" alt="">
                <span class="glass-hover"></span>
            </a>
        </div> 
    </div>
</div>

<section class="deals contanier swiper mySwiper">
    <div class="section-head">
        <h4>عروض <span>المميزة</span></h4>
    </div>
    <div class="boxs swiper-wrapper">
        @foreach (var product in products.Where(p => p.IsFeatured == false).Take(4))
        {
            <div class="box product-item swiper-slide">
                <a href="@Url.Action("Details", "Product", new { id = product.Id })">
                    <div class="product-btn">
                        <ul class="product-action">
                            <li><a href="#"><i class="fa-regular fa-heart"></i></a></li>
                            <li><a href="#"><i class="fa-solid fa-cart-arrow-down"></i></a></li>
                            <li><a href="#"><i class="fa-solid fa-print"></i></a></li>
                        </ul>
                    </div>
                    <div class="div-img">
                        <span class="discount">5%</span>
                        <img src="@(product.ProductImages?.FirstOrDefault()?.ImageUrl ?? "img/default-product.jpg")" class="img-product">
                        <img src="@(product.ProductImages?.Skip(1).FirstOrDefault()?.ImageUrl ?? "img/default-hover.jpg")" class="hover-img">
                    </div>
                    <div class="content">
                        <a href="@Url.Action("Details", "Product", new { id = product.Id })" class="product-item-link">@product.ProductName</a>
                        <div class="stars">
                            @for (int i = 1; i <= 5; i++)
                            {
                                if (i <= product.AverageRating)
                                {
                                    <i class="fa-solid fa-star"></i>
                                }
                                else if (i - product.AverageRating < 1)
                                {
                                    <i class="fa-solid fa-star-half-stroke"></i>
                                }
                                else
                                {
                                    <i class="fa-regular fa-star"></i>
                                }
                            }
                        </div>
                        <div class="price">
                            <span>$@(product.Price * 0.95m)</span>
                            <del>$@product.Price</del>
                        </div>
                        <p class="product-parg">@product.Description</p>
                        <h4>Hurry Up! Offer ends in:</h4>
                        <ul class="countdown">
                            <li><span>0</span> Days</li>
                            <li><span>19</span> Hours</li>
                            <li><span>54</span>Mins</li>
                            <li><span>39</span>Sec</li>
                        </ul>
                    </div>
                </a>
            </div>
        }
    </div>
    <div class="swiper-button-next swiper-btn"></div>
    <div class="swiper-button-prev swiper-btn"></div>
</section>

<div class="banner2 contanier">
    <div class="boxs">
        <div class="box">
            <a href="/Product/Details/4">
                <img src="img/banner-4.jpg" alt="">
                <span class="glass-hover"></span>
            </a>
        </div>
        <div class="box">
            <a href="/Product/Details/5">
                <img src="img/banner-5.jpg" alt="">
                <span class="glass-hover"></span>
            </a>
        </div>
    </div>
</div>

<section class="slide-with-img contanier">
    <div class="section-head">
        <h4>اجهزة الكترونية<span></span></h4>
    </div>
    <div class="cont">
        <div class="img-with-slide">
            <a href="#"><img src="img/banner-sm-1.jpg" alt=""></a>
        </div>
        <div class="swip-with-img swiper mySwiper">
            <div class="boxs swiper-wrapper">
                @foreach (var product in products.Where(p => p.CategoryId == 1))
                {
                    <div class="box column product-item swiper-slide">
                        <div class="product-btn">
                            <ul class="product-action">
                                <li><a href="#"><i class="fa-regular fa-heart"></i></a></li>
                                <li><a href="#"><i class="fa-solid fa-cart-arrow-down"></i></a></li>
                                <li><a href="#"><i class="fa-solid fa-print"></i></a></li>
                            </ul>
                        </div>
                        <div class="div-img">
                            <img src="@(product.ProductImages?.FirstOrDefault()?.ImageUrl ?? "img/default-product.jpg")" class="img-product">
                            <img src="@(product.ProductImages?.Skip(1).FirstOrDefault()?.ImageUrl ?? "img/default-hover.jpg")" class="hover-img">
                        </div>
                        <div class="content">
                            <a class="product-item-link">@product.ProductName</a>
                            <div class="stars">
                                @for (int i = 1; i <= 5; i++)
                                {
                                    if (i <= product.AverageRating)
                                    {
                                        <i class="fa-solid fa-star"></i>
                                    }
                                    else if (i - product.AverageRating < 1)
                                    {
                                        <i class="fa-solid fa-star-half-stroke"></i>
                                    }
                                    else
                                    {
                                        <i class="fa-regular fa-star"></i>
                                    }
                                }
                            </div>
                            <div class="price">
                                <span>$@product.Price</span>
                                <del>$@(product.Price * 1.05m)</del>
                            </div>
                        </div>
                    </div>
                }
            </div>
            <div class="swiper-button-next swiper-btn"></div>
            <div class="swiper-button-prev swiper-btn"></div>
        </div>
    </div>
</section>

<section class="slide-with-img contanier">
    <div class="section-head">
        <h4>الموبايلات و اكسسواراتها<span></span></h4>
    </div>
    <div class="cont">
        <div class="swip-with-img swiper mySwiper">
            <div class="boxs swiper-wrapper">
                @foreach (var product in products)
                {
                    <div class="box column product-item swiper-slide">
                        <div class="product-btn">
                            <ul class="product-action">
                                <li><a href="#"><i class="fa-regular fa-heart"></i></a></li>
                                <li><a href="#"><i class="fa-solid fa-cart-arrow-down"></i></a></li>
                                <li><a href="#"><i class="fa-solid fa-print"></i></a></li>
                            </ul>
                        </div>
                        <div class="div-img">
                            <img src="@(product.ProductImages?.FirstOrDefault()?.ImageUrl ?? "img/default-product.jpg")" class="img-product">
                            <img src="@(product.ProductImages?.Skip(1).FirstOrDefault()?.ImageUrl ?? "img/default-hover.jpg")" class="hover-img">
                        </div>
                        <div class="content">
                            <a class="product-item-link">@product.ProductName</a>
                            <div class="stars">
                                @for (int i = 1; i <= 5; i++)
                                {
                                    if (i <= product.AverageRating)
                                    {
                                        <i class="fa-solid fa-star"></i>
                                    }
                                    else if (i - product.AverageRating < 1)
                                    {
                                        <i class="fa-solid fa-star-half-stroke"></i>
                                    }
                                    else
                                    {
                                        <i class="fa-regular fa-star"></i>
                                    }
                                }
                            </div>
                            <div class="price">
                                <span>$@product.Price</span>
                                <del>$@(product.Price * 1.05m)</del>
                            </div>
                        </div>
                    </div>
                }
            </div>
            <div class="swiper-button-next swiper-btn"></div>
            <div class="swiper-button-prev swiper-btn"></div>
        </div>
        <div class="img-with-slide">
            <a href="#"><img src="img/banner-sm-2.jpg" alt=""></a>
        </div>
    </div>
</section>

@* <section class="slide-with-img contanier">
    <div class="section-head">
        <h4>الأجهزة الكهربائية<span></span></h4>
    </div>
    <div class="cont">
        <div class="img-with-slide">
            <a href="#"><img src="img/banner-sm-3.jpg" alt=""></a>
        </div>
        <div class="swip-with-img swiper mySwiper">
            <div class="boxs swiper-wrapper">
                @foreach (var product in products.Where(p => p.CategoryId == 4))
                {
                    <div class="box column product-item swiper-slide">
                        <div class="product-btn">
                            <ul class="product-action">
                                <li><a href="#"><i class="fa-regular fa-heart"></i></a></li>
                                <li><a href="#"><i class="fa-solid fa-cart-arrow-down"></i></a></li>
                                <li><a href="#"><i class="fa-solid fa-print"></i></a></li>
                            </ul>
                        </div>
                        <div class="div-img">
                            <img src="@(product.ProductImages?.FirstOrDefault()?.ImageUrl ?? "img/default-product.jpg")" class="img-product">
                            <img src="@(product.ProductImages?.Skip(1).FirstOrDefault()?.ImageUrl ?? "img/default-hover.jpg")" class="hover-img">
                        </div>
                        <div class="content">
                            <a class="product-item-link">@product.ProductName</a>
                            <div class="stars">
                                @for (int i = 1; i <= 5; i++)
                                {
                                    if (i <= product.AverageRating)
                                    {
                                        <i class="fa-solid fa-star"></i>
                                    }
                                    else if (i - product.AverageRating < 1)
                                    {
                                        <i class="fa-solid fa-star-half-stroke"></i>
                                    }
                                    else
                                    {
                                        <i class="fa-regular fa-star"></i>
                                    }
                                }
                            </div>
                            <div class="price">
                                <span>$@product.Price</span>
                                <del>$@(product.Price * 1.05m)</del>
                            </div>
                        </div>
                    </div>
                }
            </div>
            <div class="swiper-button-next swiper-btn"></div>
            <div class="swiper-button-prev swiper-btn"></div>
        </div>
    </div>
</section>
 *@
<section class="sale-sec contanier swiper mySwiper">
    <div class="section-head">
        <h4>المنتجات التي تمت مشاهدتها<span></span></h4>
    </div>
    <div class="boxs swiper-wrapper">
        @foreach (var product in products.TakeLast(10))
        {
            <div class="box column product-item swiper-slide">
                <div class="product-btn">
                    <ul class="product-action">
                        <li><a href="#"><i class="fa-regular fa-heart"></i></a></li>
                        <li><a href="#"><i class="fa-solid fa-cart-arrow-down"></i></a></li>
                        <li><a href="#"><i class="fa-solid fa-print"></i></a></li>
                    </ul>
                </div>
                <div class="div-img">
                    <img src="@(product.ProductImages?.FirstOrDefault()?.ImageUrl ?? "img/default-product.jpg")" class="img-product">
                    <img src="@(product.ProductImages?.Skip(1).FirstOrDefault()?.ImageUrl ?? "img/default-hover.jpg")" class="hover-img">
                </div>
                <div class="content">
                    <a class="product-item-link">@product.ProductName</a>
                    <div class="stars">
                        @for (int i = 1; i <= 5; i++)
                        {
                            if (i <= product.AverageRating)
                            {
                                <i class="fa-solid fa-star"></i>
                            }
                            else if (i - product.AverageRating < 1)
                            {
                                <i class="fa-solid fa-star-half-stroke"></i>
                            }
                            else
                            {
                                <i class="fa-regular fa-star"></i>
                            }
                        }
                    </div>
                    <div class="price">
                        <span>$@product.Price</span>
                        <del>$@(product.Price * 1.05m)</del>
                    </div>
                </div>
            </div>
        }
    </div>
    <div class="swiper-button-next swiper-btn"></div>
    <div class="swiper-button-prev swiper-btn"></div>
</section>